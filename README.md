# ููุฒุฉ: ุฅุถุงูุฉ ููุงุฐุฌ ุงููุคูููู ูุงูุนูุงูุงุช

ููุฏู ูุฐุง ุงููุฑุน ููุฒุฉ ุฌุฏูุฏุฉ ูุฅุฏุงุฑุฉ ุงููุคูููู ูููุงูุงุช ูููุตูุฉ ูุฑุจุทูู ุจุงูููุงูุงุช. ููุฏ ุชู ุชุญุฏูุซ ูููู ุงูุจูุงูุงุช ููุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ูุชุนูุณ ูุฐู ุงูุนูุงูุฉ.

## **๐ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ**

* **ุฅุฏุงุฑุฉ ุงููุคูููู:** ุฅุถุงูุฉ ุนูููุงุช CRUD ูุงููุฉ ูููุคูููู (Create, Read, Update, Delete).
* **ุนูุงูุฉ "ูุชุนุฏุฏ ุฅูู ูุงุญุฏ" (Many-to-One):** ุฑุจุท ูู ููุงู ุจูุคูู ูุงุญุฏ ูุญุฏุฏ.
* **ุชุญููู ูุณุจู ููุจูุงูุงุช (Preloading):** ุนูุฏ ุฌูุจ ุงูููุงูุงุชุ ูุชู ุงูุขู ุชููุงุฆููุง ุชุถููู ุจูุงูุงุช ุงููุคูู ุงููุฑุชุจุทุ ููุง ูููู ูู ุนุฏุฏ ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช.

## **๐๏ธ ุงูุชุบููุฑุงุช ุงูุฑุฆูุณูุฉ ูู ุงูููุฏ**

* **`internal/models/author.go` (ุฌุฏูุฏ):**
    * ุชุนุฑูู ุจููุฉ `Author` ูุน ุญููู ูุซู `Name` ู `Email`.
    * ุชุถููู `gorm.Model` ููููุงุชูุญ ุงูุฃุณุงุณูุฉ ูุญููู ุงูุชูุงุฑูุฎ.
    * ุฅุถุงูุฉ ุญูู `Articles []Article` ูุชุญุฏูุฏ ุนูุงูุฉ "ูุงุญุฏ ุฅูู ูุชุนุฏุฏ" ูู ุฌุงูุจ `Author`.
* **`internal/models/article.go` (ููุนุฏูู):**
    * ุชู ุฅุฒุงูุฉ ุญูู `Author` (ุณูุณูุฉ ูุตูุฉ).
    * ุฅุถุงูุฉ `AuthorID uint` ููููู ุงูููุชุงุญ ุงูุฃุฌูุจู ุงูุฐู ูุดูุฑ ุฅูู `Author`.
    * ุฅุถุงูุฉ `Author Author` ูุน ุนูุงูุฉ `gorm:"foreignKey:AuthorID"` ูุชุญุฏูุฏ ุงูุนูุงูุฉ ุงูุตุฑูุญุฉ.
    * ุฅุถุงูุฉ `validate:"-"` ุฅูู ุญูู `Author` ูู ุจููุฉ `Article` ูุชุฌูุจ ุงูุชุญูู ูู ุตุญุฉ ูุงุฆู `Author` ุงููุชุฏุงุฎู ุนูุฏ ุฅุฑุณุงู `AuthorID` ููุท ูู ุทูุจุงุช ุงูููุงูุงุช.
* **`internal/repository/author_repository.go` (ุฌุฏูุฏ):**
    * ุชูููุฐ ุทุฑู CRUD ููููุฐุฌ `Author` (ุนูู ุบุฑุงุฑ `ArticleRepository`).
    * ุงุณุชุฎุฏุงู `Preload("Articles")` ูู `FindByID` ูุฌูุจ ููุงูุงุช ุงููุคูู ุนูุฏ ุงูุงุณุชุนูุงู ุนูู.
* **`internal/repository/article_repository.go` (ููุนุฏูู):**
    * ุชู ุชุนุฏูู ุฏูุงู `FindAll()` ู `FindByID()` ูุงุณุชุฎุฏุงู `Preload("Author")`ุ ููุง ูุถูู ุชุญููู ุจูุงูุงุช ุงููุคูู ุชููุงุฆููุง ูุน ุงูููุงูุงุช.
* **`internal/handlers/author_handler.go` (ุฌุฏูุฏ):**
    * ุชูููุฐ ูุนุงูุฌุงุช HTTP ูุนูููุงุช CRUD ูููุคูููู (ุนูู ุบุฑุงุฑ `ArticleHandler`).
    * ุชุถููู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูู `Name` ู `Email` ูููุคูููู.
* **`internal/handlers/article_handler.go` (ููุนุฏูู):**
    * ุชุนุฏูู `CreateArticle` ููุจูู `AuthorID` ุจุฏูุงู ูู ุญูู `Author` ุงููุตู.
    * ุงูุชุนุงูู ูุน ุงูุงุณุชุฌุงุจุงุช ุงูุชู ุณุชุชุถูู ุงูุขู ูุงุฆู `Author` ุงููุชุฏุงุฎู ูู ุงูููุงูุงุช.
* **`internal/database/gorm.go` (ููุนุฏูู):**
    * ุชู ุชุญุฏูุซ `db.AutoMigrate()` ููุดูู ูููุฐุฌ `models.Author{}`ุ ููุง ูุถูู ุฅูุดุงุก ุฌุฏูู `authors` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.
* **`cmd/api/main.go` (ููุนุฏูู):**
    * ุชููุฆุฉ `AuthorRepository` ู `AuthorHandler` ูู ูุธููุฉ `main`.
    * ุฅุถุงูุฉ ูุฌููุนุฉ ูุณุงุฑุงุช ุฌุฏูุฏุฉ `/api/v1/authors` ููุนุงูุฌุฉ ุทูุจุงุช ุงููุคูููู.

## **๐ ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (API Endpoints) ุงูุฌุฏูุฏุฉ ูููุคูููู**

ุจุงูุฅุถุงูุฉ ุฅูู ูุณุงุฑุงุช ุงูููุงูุงุช ุงูููุฌูุฏุฉุ ุชู ุชูุฏูู ุงููุณุงุฑุงุช ุงูุชุงููุฉ ูุฅุฏุงุฑุฉ ุงููุคูููู:

| ุงูุทุฑููุฉ | ุงููุณุงุฑ          | ุงููุตู                          | ุฌุณู ุงูุทูุจ (Request Body)                   |
| :---- | :-------------- | :----------------------------- | :----------------------------------------- |
| POST  | `/api/v1/authors` | **ุฅูุดุงุก** ูุคูู ุฌุฏูุฏ.            | `{"name": "...", "email": "..."}`         |
| GET   | `/api/v1/authors` | **ุฌูุจ ุฌููุน** ุงููุคูููู.         | ูุง ููุฌุฏ                                    |
| GET   | `/api/v1/authors/:id` | **ุฌูุจ** ูุคูู ูุงุญุฏ ุญุณุจ ุงููุนุฑู (ID). | ูุง ููุฌุฏ                                    |
| PUT   | `/api/v1/authors/:id` | **ุชุญุฏูุซ** ูุคูู ููุฌูุฏ ุญุณุจ ุงููุนุฑู (ID). | `{"name": "...", "email": "..."}`         |
| DELETE | `/api/v1/authors/:id` | **ุญุฐู** ูุคูู ุญุณุจ ุงููุนุฑู (ID).  | ูุง ููุฌุฏ                                    |

## **๐ ููููุฉ ุงูุงุฎุชุจุงุฑ**

1.  **ุชุดุบูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
    ```bash
    docker-compose up -d
    ```
2.  **ุชุซุจูุช ุงูุชุจุนูุงุช:**
    ```bash
    go mod tidy
    ```
3.  **ุชุดุบูู ุงูุชุทุจูู:**
    ```bash
    cd cmd/api
    go run main.go
    ```
4.  **ุงุณุชุฎุฏุงู `curl` ุฃู Postman:**
    * **ุฃููุงูุ ุฃูุดุฆ ูุคูููุง:**
        ```bash
        curl -X POST -H "Content-Type: application/json" -d '{"name": "ุฃุญูุฏ ุฌูุงู", "email": "ahmed.gamal@example.com"}' http://localhost:3000/api/v1/authors
        ```
        ุงุญูุธ ุงูู `ID` ุงูุฎุงุต ุจุงููุคูู ุงูุฐู ุชู ุฅูุดุงุคู ูู ุงูุงุณุชุฌุงุจุฉ.
    * **ุซูุ ุฃูุดุฆ ููุงููุง ุจุงุณุชุฎุฏุงู `author_id` ุงูุฐู ุญุตูุช ุนููู:**
        ```bash
        curl -X POST -H "Content-Type: application/json" -d '{"title": "ููุฏูุฉ ุฅูู Go Fiber", "content": "ููุงู ุฑุงุฆุน ูุดุฑุญ ุฃุณุงุณูุงุช Go Fiber.", "author_id": 1}' http://localhost:3000/api/v1/articles
        ```
    * **ุฌูุจ ุงูููุงูุงุช ููุชุญูู ูู ุชุถููู ุงููุคูู:**
        ```bash
        curl http://localhost:3000/api/v1/articles
        ```
        ูุฌุจ ุฃู ุชุฑู ุจูุงูุงุช ุงููุคูู ูุชุฏุงุฎูุฉ ุฏุงุฎู ูู ูุงุฆู ููุงู.