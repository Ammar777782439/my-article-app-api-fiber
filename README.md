# **my-article-app: نظام إدارة المقالات والمؤلفين (Go, Fiber, GORM)**

`my-article-app` هو تطبيق ويب متكامل بلغة Go يوفر واجهة برمجة تطبيقات (API) من نوع RESTful لإدارة المقالات والمؤلفين. تم بناء التطبيق باستخدام إطار العمل Fiber ومكتبة GORM للتعامل مع PostgreSQL، مع اتباع هيكلية نظيفة وقابلة للتطوير (Clean Architecture).

---

## 🎯 **الغرض من المشروع**

- **عرض المهارات التقنية:** يوضح كفاءتك في استخدام Go، Fiber، GORM، Docker، وفهم RESTful APIs.
- **تطبيق عملي للهيكلية النظيفة:** يبرهن على قدرتك على تصميم تطبيقات قابلة للصيانة والتوسع من خلال فصل الاهتمامات (Handlers, Use Cases, Repositories).
- **إدارة العلاقات المعقدة:** يعالج علاقات البيانات (واحد إلى متعدد بين المؤلفين والمقالات) بكفاءة.
- **أساس لمشاريع أكبر:** يمكن اعتباره نواة لمشاريع أكثر تعقيدًا تتطلب إدارة محتوى أو مستخدمين.

---

## ✨ **الميزات الرئيسية**

- **إدارة شاملة للمقالات (Articles):**
  - إنشاء مقالات جديدة مع ربطها بمؤلف.
  - قراءة جميع المقالات أو مقال محدد (مع بيانات المؤلف).
  - تحديث بيانات المقالات.
  - حذف المقالات.
- **إدارة شاملة للمؤلفين (Authors):**
  - إنشاء مؤلفين جدد.
  - قراءة جميع المؤلفين أو مؤلف محدد (مع قائمة مقالاته).
  - تحديث بيانات المؤلفين.
  - حذف المؤلفين (مع مراعاة المقالات المرتبطة).
- **علاقات بيانات قوية:**
  - علاقة "واحد إلى متعدد" بين المؤلفين والمقالات.
  - تحميل مسبق (Preloading) للبيانات المرتبطة لتحسين الأداء.
- **التحقق من صحة البيانات:**
  - استخدام مكتبة `go-playground/validator` لضمان سلامة البيانات المُدخلة.
- **هيكلية تطبيق نظيفة:**
  - Handlers، Use Cases، Repositories، Models.
- **سهولة الإعداد والتشغيل:**
  - استخدام Docker و Docker Compose لتشغيل قاعدة بيانات PostgreSQL بسهولة.

---

## 🛠️ **التقنيات المستخدمة**

- **لغة البرمجة:** Go (Golang) 1.18+
- **إطار عمل الويب:** Fiber v2
- **ORM:** GORM
- **قاعدة البيانات:** PostgreSQL
- **التحقق من صحة البيانات:** `go-playground/validator` v10
- **الحاويات:** Docker & Docker Compose

---

## 🏛️ **هيكلية المشروع**

```
my-article-app/
├── cmd/api/              # نقطة الدخول الرئيسية للتطبيق
│   └── main.go
├── internal/
│   ├── database/         # إعداد الاتصال بقاعدة البيانات
│   │   └── gorm.go
│   ├── handlers/         # معالجات طلبات HTTP
│   │   ├── article_handler.go
│   │   └── author_handler.go
│   ├── models/           # تعريف هياكل البيانات
│   │   ├── article.go
│   │   └── author.go
│   ├── repository/       # طبقة الوصول للبيانات
│   │   ├── article_repository.go
│   │   └── author_repository.go
│   └── usecase/          # طبقة منطق العمل
│       ├── article_usecase.go
│       └── author_usecase.go
├── .gitignore
├── go.mod
├── go.sum
├── README.md
└── docker-compose.yml
```

**تدفق الطلب (Request Flow):**
1. يصل طلب HTTP إلى خادم Fiber.
2. يوجه Fiber الطلب إلى الـ Handler المناسب.
3. يقوم الـ Handler بتحليل الطلب والتحقق من صحة المدخلات.
4. يستدعي الـ Handler الـ UseCase المناسب.
5. يقوم الـ UseCase بتنسيق العمليات مع الـ Repository.
6. ينفذ الـ Repository عمليات قاعدة البيانات باستخدام GORM.
7. تعود النتائج عبر الطبقات إلى الـ Handler، الذي يرسل الاستجابة للعميل.

---

## 🚀 **متطلبات التشغيل والإعداد**

### المتطلبات:
- **Go:** الإصدار 1.18 أو أحدث
- **Docker و Docker Compose:** لتشغيل قاعدة بيانات PostgreSQL (اختياري)
- **Git:** لاستنساخ المستودع

### خطوات الإعداد:

1. **استنساخ المستودع:**
   ```bash
   git clone <رابط-المستودع>
   cd my-article-app
   ```
2. **إعداد قاعدة البيانات (باستخدام Docker Compose):**
   - يوجد ملف `docker-compose.yml` مُعد مسبقًا:
   ```yaml
   version: '3.8'
   services:
     postgres_db:
       image: postgres:13-alpine
       container_name: my_article_app_db
       environment:
         POSTGRES_USER: postgres
         POSTGRES_PASSWORD: postgres
         POSTGRES_DB: article_db
       ports:
         - "5432:5432"
       volumes:
         - postgres_data:/var/lib/postgresql/data
   volumes:
     postgres_data:
   ```
   - لتشغيل قاعدة البيانات:
   ```bash
   docker-compose up -d
   ```
   - **ملاحظة:** تأكد من أن إعدادات الاتصال في `internal/database/gorm.go` (متغير `dsn`) تتطابق مع إعدادات Docker أو PostgreSQL المحلية.

3. **تثبيت التبعيات:**
   ```bash
   go mod tidy
   ```
4. **تشغيل التطبيق:**
   ```bash
   go run ./cmd/api/main.go
   ```
   ستظهر رسالة بأن الخادم يعمل على المنفذ `3000`.

---

## 📡 **واجهات برمجة التطبيقات (API Endpoints)**

### المؤلفون (Authors)

| الطريقة | المسار            | الوصف                  | جسم الطلب (مثال)                  | استجابة ناجحة (مثال) |
|---------|-------------------|------------------------|------------------------------------|----------------------|
| POST    | /authors          | إنشاء مؤلف جديد        | { "name": "اسم المؤلف", "email": "email@example.com" } | 201 Created           |
| GET     | /authors          | جلب جميع المؤلفين      | (لا يوجد)                         | 200 OK               |
| GET     | /authors/{id}     | جلب مؤلف محدد          | (لا يوجد)                         | 200 OK               |
| PUT     | /authors/{id}     | تحديث بيانات مؤلف      | { "name": "اسم جديد", "email": "email@domain.com" } | 200 OK                |
| DELETE  | /authors/{id}     | حذف مؤلف               | (لا يوجد)                         | 204 No Content        |

### المقالات (Articles)

| الطريقة | المسار            | الوصف                  | جسم الطلب (مثال)                  | استجابة ناجحة (مثال) |
|---------|-------------------|------------------------|------------------------------------|----------------------|
| POST    | /articles         | إنشاء مقال جديد        | { "title": "عنوان", "content": "...", "author_id": 1 } | 201 Created           |
| GET     | /articles         | جلب جميع المقالات      | (لا يوجد)                         | 200 OK               |
| GET     | /articles/{id}    | جلب مقال محدد          | (لا يوجد)                         | 200 OK               |
| PUT     | /articles/{id}    | تحديث بيانات مقال      | { "title": "عنوان جديد", "content": "...", "author_id": 1 } | 200 OK                |
| DELETE  | /articles/{id}    | حذف مقال               | (لا يوجد)                         | 204 No Content        |

### التحقق من صحة الخادم (Health Check)

| الطريقة | المسار    | الوصف                  |
|---------|-----------|------------------------|
| GET     | /health   | التحقق من أن التطبيق يعمل |

---

## 🧪 **أمثلة استخدام curl لاختبار نقاط النهاية**

1. **إنشاء مؤلف جديد:**
   ```bash
   curl -X POST -H "Content-Type: application/json" \
        -d '{"name": "اسم المؤلف", "email": "email@example.com"}' \
        http://localhost:3000/api/v1/authors
   ```

2. **إنشاء مقال جديد (مع author_id):**
   ```bash
   curl -X POST -H "Content-Type: application/json" \
        -d '{"title": "عنوان المقال", "content": "محتوى...", "author_id": 1}' \
        http://localhost:3000/api/v1/articles
   ```

3. **جلب جميع المقالات:**
   ```bash
   curl http://localhost:3000/api/v1/articles
   ```

4. **جلب مقال محدد:**
   ```bash
   curl http://localhost:3000/api/v1/articles/1
   ```

---

## 💡 **تحسينات وتطويرات مستقبلية مقترحة**

- **المصادقة والترخيص:** إضافة JWT أو ما شابه لحماية نقاط النهاية.
- **الترقيم والفرز والتصفية:** دعم Pagination, Sorting, Filtering.
- **الاختبارات:** كتابة اختبارات وحدات وتكامل.
- **التسجيل والمراقبة:** دمج logrus/zap و Prometheus/Grafana.
- **توثيق API تفاعلي:** استخدام Swagger/OpenAPI (Swaggo).
- **تحسين التعامل مع الأخطاء:** توفير رموز وأوصاف أخطاء قياسية.
- **استخدام متغيرات البيئة:** لإدارة الإعدادات الحساسة.

---

## 🎯 **كيف يساعدك هذا المشروع في سوق العمل؟**

- **يعرض مهاراتك العملية:** يثبت قدرتك على بناء تطبيق ويب كامل.
- **يبرز فهمك للهندسة البرمجية:** تطبيق مبادئ الهيكلية النظيفة وفصل الاهتمامات.
- **يوضح خبرتك في التقنيات المطلوبة:** Go، Fiber، GORM، PostgreSQL، Docker.
- **يشكل نقطة انطلاق للنقاش:** يمكنك استخدامه في المقابلات الفنية.
- **قابل للتوسع:** يمكنك البناء عليه وإضافة ميزات جديدة.

---

## 🤝 **المساهمة**

1. قم بعمل Fork للمستودع.
2. أنشئ فرعًا جديدًا للميزة أو الإصلاح (`git checkout -b feature/AmazingFeature`).
3. نفذ التغييرات الخاصة بك.
4. قم بعمل Commit للتغييرات (`git commit -m 'Add some AmazingFeature'`).
5. ادفع التغييرات إلى الفرع (`git push origin feature/AmazingFeature`).
6. افتح Pull Request.

---

## 📄 **الترخيص**

هذا المشروع مرخص تحت رخصة MIT.

