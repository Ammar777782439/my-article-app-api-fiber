# **my-article-app: نظام إدارة المقالات والمؤلفين (Go, Fiber, GORM)**

my-article-app هو تطبيق ويب متكامل مبني بلغة Go، يوفر واجهة برمجة تطبيقات RESTful لإدارة المقالات والمؤلفين. تم بناء التطبيق باستخدام إطار العمل Fiber ومكتبة GORM للتفاعل مع قاعدة بيانات PostgreSQL، مع اتباع هيكلية نظيفة وقابلة للتطوير تركز على فصل الاهتمامات.

## **✨ الميزات الرئيسية**

* **إدارة شاملة للمقالات:** إنشاء، قراءة، تحديث، وحذف المقالات.  
* **إدارة شاملة للمؤلفين:** إنشاء، قراءة، تحديث، وحذف المؤلفين.  
* **هيكلية تطبيق نظيفة (Clean Architecture):**  
  * **طبقة المعالجات (Handlers):** مسؤولة عن طلبات واستجابات HTTP.  
  * **طبقة كائنات نقل البيانات (DTOs):** تفصل بين نماذج قاعدة البيانات والواجهة الخارجية للـ API.  
  * **طبقة حالات الاستخدام (Use Cases):** تحتوي على منطق العمل (Business Logic).  
  * **طبقة المستودعات (Repositories):** مسؤولة عن التفاعل المباشر مع قاعدة البيانات.  
* **علاقات فعالة بين البيانات:** استخدام استراتيجية التحميل المسبق (Preloading) لجلب البيانات المرتبطة (مثل مقالات المؤلف) بكفاءة في استعلام واحد، مما يمنع مشاكل الأداء الشائعة مثل (N+1).  
* **التحقق من صحة البيانات:** استخدام مكتبة go-playground/validator لضمان سلامة البيانات المدخلة.  
* **سهولة الإعداد والتشغيل:** استخدام Docker و Docker Compose لتشغيل قاعدة بيانات PostgreSQL بسهولة.

## **🏛️ هيكلية المشروع**

يتبع المشروع هيكلية متعددة الطبقات لفصل الاهتمامات وجعل الكود أكثر تنظيمًا وقابلية للصيانة.

my-article-app/  
├── cmd/api/main.go              \# نقطة الدخول الرئيسية للتطبيق  
├── internal/  
│   ├── database/                \# إعداد اتصال قاعدة البيانات  
│   ├── dto/                     \# (DTOs) كائنات نقل البيانات للـ API  
│   ├── handlers/                \# معالجات طلبات HTTP (تتعامل مع DTOs)  
│   ├── models/                  \# نماذج GORM (تمثل جداول قاعدة البيانات)  
│   ├── repository/              \# طبقة الوصول إلى البيانات (تتعامل مع Models)  
│   └── usecase/                 \# طبقة منطق العمل (الجسر بين DTOs و Models)  
├── go.mod  
├── go.sum  
└── docker-compose.yml

**رحلة تدفق الطلب (Request Flow):**

1. يصل طلب HTTP إلى خادم Fiber.  
2. يقوم Fiber بتوجيه الطلب إلى **المعالج (Handler)** المناسب.  
3. يقوم المعالج بتحليل الطلب إلى **Request DTO** ويتحقق من صحته.  
4. يستدعي المعالج **حالة الاستخدام (UseCase)** المناسبة ويمرر لها الـ DTO.  
5. تقوم حالة الاستخدام بتطبيق منطق العمل، وتحويل الـ DTO إلى **نموذج (Model)**.  
6. تستدعي حالة الاستخدام **المستودع (Repository)** لتنفيذ عمليات قاعدة البيانات على الـ Model.  
7. يقوم المستودع بتنفيذ الاستعلام باستخدام GORM.  
8. تعود النتائج عبر الطبقات: يحول الـ UseCase الـ Model الناتج إلى **Response DTO**.  
9. يستلم الـ Handler الـ Response DTO ويرسله كاستجابة JSON للمستخدم.

## **🛠️ التقنيات المستخدمة**

* **لغة البرمجة:** Go (Golang) 1.18+  
* **إطار العمل:** Fiber v2  
* **ORM:** GORM  
* **قاعدة البيانات:** PostgreSQL  
* **التحقق من صحة البيانات:** go-playground/validator v10  
* **الحاويات:** Docker & Docker Compose

## **🚀 المتطلبات والإعداد**

### **المتطلبات:**

* **Go:** الإصدار 1.18 أو أحدث.  
* **Docker** و **Docker Compose:** لتشغيل قاعدة بيانات PostgreSQL.  
* **Git:** لاستنساخ المستودع.

### **خطوات الإعداد:**

1. **استنساخ المستودع:**  
   git clone \<رابط-المستودع\>  
   cd my-article-app

2. **إعداد قاعدة البيانات (باستخدام Docker Compose):**  
   * يوجد ملف docker-compose.yml معد مسبقًا.  
   * لتشغيل قاعدة البيانات:

docker-compose up \-d

* **ملاحظة:** تأكد من تطابق إعدادات الاتصال في internal/database/gorm.go (متغير dsn) مع إعدادات Docker أو PostgreSQL المحلية.  
3. **تثبيت التبعيات:**  
   go mod tidy

4. **تشغيل التطبيق:**  
   go run ./cmd/api/main.go

   ستظهر رسالة تفيد بأن الخادم يعمل على المنفذ 3000\.

## **📡 واجهات برمجة التطبيقات (API Endpoints)**

تستخدم الواجهات الآن DTOs للطلبات والاستجابات لضمان الأمان والوضوح.

### **المؤلفون (Authors)**

| الطريقة | المسار | الوصف | جسم الطلب (مثال) | الاستجابة الناجحة (مثال) |  
| POST | /api/v1/authors | إنشاء مؤلف جديد | {"name": "أحمد", "email": "a@a.com"} | 201 Created مع AuthorResponse |  
| GET | /api/v1/authors | جلب جميع المؤلفين | (لا يوجد) | 200 OK مع \[\]AuthorResponse |  
| GET | /api/v1/authors/{id} | جلب مؤلف محدد | (لا يوجد) | 200 OK مع AuthorDetailResponse |  
| PUT | /api/v1/authors/{id} | تحديث بيانات مؤلف | \`{"name": "أحمد الجديد | |